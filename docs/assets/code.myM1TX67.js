import{W as l}from"./store.B0ay3j7c.js";/* empty css              */const r=new Map;async function v(e){let t="";return e==="custom"?u.value:r.has(e)?r.get(e):(t=await fetch(`/userscripts/${e}.js`).then(c=>c.text()),r.set(e,t),t)}const o=new l("last_character","snake"),i=new l("active_script","");v(o.value).then(e=>i.set(e));const u=new l("custom_script",""),s=document.createElement("div");s.id="codeeditor";document.body.appendChild(s);const a=document.createElement("div");a.id="explorer";a.innerHTML+="<h3>Characters:</h3>";s.appendChild(a);const n=document.createElement("div");n.id="contentarea";s.appendChild(n);const d=document.createElement("button");d.innerText="play";document.body.appendChild(d);const p=document.createElement("button");p.innerText="documentation";p.onclick=()=>{window.open("/docs/character_scripting.md","_blank")};document.body.appendChild(p);console.log(document.body);d.onclick=()=>{window.location.href="/"};document.addEventListener("keyup",e=>{e.key==="Escape"&&d.click()});(async()=>(await fetch("/userscripts/list.json").then(t=>t.json())).concat(u.value?["custom"]:[]).forEach(t=>{const c=document.createElement("p");c.innerText=t,c.addEventListener("click",m=>{o.set(t),v(t).then(h=>{n.innerText=h,i.set(h),o.set(t)})}),o.subscribe(m=>{m===t?c.classList.add("active"):c.classList.remove("active")}),a.appendChild(c)}))();n.contentEditable="true";n.innerHTML=i.value;n.addEventListener("input",e=>{i.set(n.innerText),u.set(n.innerText),o.set("custom"),console.log(i.value)});
